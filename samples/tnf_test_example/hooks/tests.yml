---

- name: Checking all test pods are running
  k8s_info:
    namespace: "{{ dci_openshift_app_ns }}"
    kind: Pod
    label_selectors:
      - test-network-function.com/generic=target
  register: test_result
  retries: 60
  delay: 5
  until:
    - "test_result.resources|length == 2"
    - "'status' in test_result.resources[0]"
    - "'phase' in test_result.resources[0].status"
    - "test_result.resources[0].status.phase == 'Running'"
    - "'status' in test_result.resources[1]"
    - "'phase' in test_result.resources[1].status"
    - "test_result.resources[1].status.phase == 'Running'"
